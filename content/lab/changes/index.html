<h1><i>I Ching</i>: Book of Changes</h1>
<title>I Ching: Book of Changes</title>

<p>
<a href="hexagram/">Browse hexagrams</a> 
<br>
<a href="about.html">What is this?</a>
</p>

<fieldset>
<legend for="method">Method</legend>
<select name="method" id="method">
    <option value="three">Three-coin</option>
    <option value="three-yarrow" selected>Modified three-coin</option>
    <option value="two">Two-coin</option>
</select>
</fieldset>

<style>
form.procedure { display: none; }
form.procedure.selected { display: block; }
.hidden { visibility: hidden; }
button.coin:before { content: "ðŸª™"; }
button.flip-all:before { content: "Flip all ðŸª™"; }
fieldset {
    max-width: fit-content;
    padding-right: 20px;
    padding-bottom: 20px;
    margin-top: 20px;
    margin-bottom: 20px;
}
#numbers-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
#numbers-list li { display: inline-block; width: 1rem; }
#numbers-list li input { background-color: transparent; border: none; text-align: center; }
#numbers-list li:not(:first-child) { margin-left: 2px; }
#numbers-list li input::placeholder { text-decoration: underline; color: var(--fg-light-secondary); }
/* Chrome, Safari, Edge, Opera */
#numbers-list li input::-webkit-outer-spin-button,
#numbers-list li input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
/* Firefox */
#numbers-list li input[type=number] {
  -moz-appearance: textfield;
}
#copy:before { content: "ðŸ“‹ "; }
#share-notif { opacity: 1; display: inline-block; }
#share-notif.fading {
    opacity: 0;
    transition: opacity 2s linear;
}
button, select, input {
    font-family: Lora, Garamond, serif;
    color: var(--fg-light);
    font-size: clamp(1.1rem, 1vw, 16px);
}
button { margin-bottom: 2px; }

/* Coin flip animation */
.coin-flip-wrapper {
    display: inline-block;
    perspective: 280px;
}
.coin-flip-wrapper button.coin {
    transform-style: preserve-3d;
    backface-visibility: visible;
}
.coin-flip-wrapper button.coin.flipping {
    pointer-events: none;
    animation: coin-flip 0.7s ease-out forwards;
}
@keyframes coin-flip {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(1800deg); }
}

/* Big main coin above Throw fieldset */
.throw-section {
    margin-bottom: 0.5rem;
}
.coin-flip-wrapper.coin-toss-main {
    perspective: 320px;
    display: block;
}
.coin-flip-wrapper.coin-toss-main button.coin {
    border: none;
    outline: none;
    background: transparent;
    padding: 0.25rem;
    cursor: pointer;
    font-size: 3.5rem;
    line-height: 1;
    margin-bottom: 0;
    -webkit-appearance: none;
    appearance: none;
}
.coin-flip-wrapper.coin-toss-main button.coin:focus {
    outline: none;
}
.coin-flip-wrapper.coin-toss-main button.coin:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 4px;
}
</style>

<form class="procedure" name="three">
    <div class="throw-section">
        <span class="coin-flip-wrapper coin-toss-main"><button type="button" class="coin coin-toss-main" aria-label="Flip coin"></button></span>
    </div>
    <fieldset>
        <legend>Throw</legend>
        <button type="button" class="flip-all"></button>

        <div class="toss">
            <select name="first-toss">
                <option disabled selected value></option>
                <option value="heads">Heads</option>
                <option value="tails">Tails</option>
            </select>
            <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
        </div>

        <div class="toss">
            <select name="second-toss">
                <option disabled selected value></option>
                <option value="heads">Heads</option>
                <option value="tails">Tails</option>
            </select>
            <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
        </div>

        <div class="toss">
            <select name="third-toss">
                <option disabled selected value></option>
                <option value="heads">Heads</option>
                <option value="tails">Tails</option>
            </select>
            <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
        </div>

        <input type="submit" name="submit" value="Submit" disabled>
    </input>
</form>

<form class="procedure selected" name="three-yarrow">
    <div class="throw-section">
        <span class="coin-flip-wrapper coin-toss-main"><button type="button" class="coin coin-toss-main" aria-label="Flip coin"></button></span>
    </div>
    <fieldset>
    <legend>Throw</legend>
    <button type="button" class="flip-all"></button>

    <div class="toss">
        <select name="first-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <div class="toss">
        <select name="second-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <div class="toss">
        <select name="third-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <input type="submit" name="submit" value="Submit" disabled>
    </fieldset>
</form>

<form class="procedure" name="two">
    <div class="throw-section">
        <span class="coin-flip-wrapper coin-toss-main"><button type="button" class="coin coin-toss-main" aria-label="Flip coin"></button></span>
    </div>
    <fieldset>
    <legend>Throw</legend>
    <button type="button" class="flip-all"></button>

    <div class="toss">
        <select name="first-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <div class="toss">
        <select name="second-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <div class="toss">
        <select name="third-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <div class="toss">
        <select name="fourth-toss">
            <option disabled selected value></option>
            <option value="heads">Heads</option>
            <option value="tails">Tails</option>
        </select>
        <span class="coin-flip-wrapper"><button type="button" class="coin"></button></span>
    </div>

    <input type="submit" name="submit" value="Submit" disabled>
    </fieldset>
</form>

<div id="numbers">
    <fieldset>
        <legend>Numbers</legend>
    <ul id="numbers-list">
        <li><input type="number" min="6" max="9" id="n0" placeholder="  "></li>
        <li><input type="number" min="6" max="9" id="n1" placeholder="  "></li>
        <li><input type="number" min="6" max="9" id="n2" placeholder="  "></li>
        <li><input type="number" min="6" max="9" id="n3" placeholder="  "></li>
        <li><input type="number" min="6" max="9" id="n4" placeholder="  "></li>
        <li><input type="number" min="6" max="9" id="n5" placeholder="  "></li>
    </ul>
    </fieldset>
</div>

<button id="submit-consultation" class="submit hidden">Receive consultation</button> <!-- only appears if 6 numbers are generated -->

<div id="results" class="hidden">
    <div id="hexagram">
        <p><b>Hexagram:</b> <span id="hexagram-result"></span></p>
    </div>
    <div id="alternative" class="hidden">
        <p><b>Changing to:</b> <span id="alternative-result"></span></p>
    </div>
    <div id="share">
        <button id="share-btn" class="copy">Share</button>
        <span id="share-notif" class="hidden">Copied!</span>
    </div>
</div>

<script src="app.js"></script>
